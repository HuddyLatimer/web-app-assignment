<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head}">
    <title>Order Confirmation - Sports Equipment Store</title>
</head>
<body>
<nav th:replace="~{fragments/header :: navbar}"></nav>

<div class="container">
    <div class="text-center mb-5">
        <i class="bi bi-check-circle-fill text-success" style="font-size: 5rem;"></i>
        <h2 class="mt-3">Order Placed Successfully!</h2>
        <p class="lead">Thank you for your purchase. Your order has been confirmed.</p>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Order Details</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>Order Number:</strong><br>
                            <span class="text-primary fs-5" th:text="'#' + ${order.id}">Order ID</span>
                        </div>
                        <div class="col-md-6">
                            <strong>Order Date:</strong><br>
                            <span th:text="${#temporals.format(order.orderDate, 'MMM dd, yyyy HH:mm')}">Date</span>
                        </div>
                    </div>

                    <hr>

                    <h5 class="mb-3">Shipping Address</h5>
                    <address>
                        <span th:text="${order.shippingAddress}">Address</span><br>
                        <span th:text="${order.shippingCity}">City</span>,
                        <span th:text="${order.shippingZip}">ZIP</span>
                    </address>

                    <hr>

                    <h5 class="mb-3">Order Items</h5>
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th class="text-end">Subtotal</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="item : ${order.orderItems}">
                            <td th:text="${item.product.name}">Product Name</td>
                            <td th:text="'$' + ${#numbers.formatDecimal(item.priceAtPurchase, 1, 2)}">$0.00</td>
                            <td th:text="${item.quantity}">1</td>
                            <td class="text-end" th:text="'$' + ${#numbers.formatDecimal(item.subtotal, 1, 2)}">$0.00</td>
                        </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="3" class="text-end"><strong>Total:</strong></td>
                            <td class="text-end"><strong class="text-primary fs-5" th:text="'$' + ${#numbers.formatDecimal(order.totalAmount, 1, 2)}">$0.00</strong></td>
                        </tr>
                        </tfoot>
                    </table>

                    <div class="alert alert-info mt-4">
                        <i class="bi bi-info-circle"></i> A confirmation email has been sent to your registered email address.
                    </div>

                    <div class="text-center mt-4">
                        <a href="/products" th:href="@{/products}" class="btn btn-primary">
                            <i class="bi bi-shop"></i> Continue Shopping
                        </a>
                        <a href="/profile" th:href="@{/profile}" class="btn btn-outline-secondary">
                            <i class="bi bi-person"></i> View Order History
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="~{fragments/footer :: footer}"></footer>
<div th:replace="~{fragments/footer :: scripts}"></div>
</body>
</html>
